(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{6518:function(e){"use strict";e.exports=function(e){var t=void 0;t="string"==typeof e?[e]:e.raw;for(var r="",s=0;s<t.length;s++)r+=t[s].replace(/\\\n[ \t]*/g,"").replace(/\\`/g,"`"),s<(arguments.length<=1?0:arguments.length-1)&&(r+=arguments.length<=s+1?void 0:arguments[s+1]);var a=r.split("\n"),n=null;return a.forEach(function(e){var t=e.match(/^(\s+)\S+/);if(t){var r=t[1].length;n=n?Math.min(n,r):r}}),null!==n&&(r=a.map(function(e){return" "===e[0]?e.slice(n):e}).join("\n")),(r=r.trim()).replace(/\\n/g,"\n")}},2781:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let a=s(r(6518)),n=s(r(9843)),l=s(r(77)),i="twhZNwxI1aFG3r4";function o(e,...t){let r="";for(let s=0;s<e.length;s++)if(r+=e[s],s<t.length){let e=t[s],a=!1;if(l.default(e).value&&(e=l.default(e).value,a=!0),e&&e[i]||a){let t=r.split("\n"),s=t[t.length-1].search(/\S/),n=s>0?" ".repeat(s):"";(a?JSON.stringify(e,null,2):e[i]).split("\n").forEach((e,t)=>{t>0?r+="\n"+n+e:r+=e})}else if("string"==typeof e&&e.includes("\n")){let t=r.match(/(?:^|\n)( *)$/);if("string"==typeof e){let s=t?t[1]:"";r+=e.split("\n").map((e,t)=>(e=i+e,0===t?e:`${s}${e}`)).join("\n")}else r+=e}else r+=e}return(r=a.default(r)).split(i).join("")}o.pretty=e=>n.default(e)?{[i]:JSON.stringify(e,null,2)}:e,t.default=o},77:function(e){"use strict";e.exports=function e(t){if(!(this instanceof e))return new e(t);this.err=null,this.value=null;try{this.value=JSON.parse(t)}catch(e){this.err=e}}},8312:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(6424)}])},6424:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return G}});var s=r(5893),a=r(7294),n=r(2575),l=r.n(n);let i=e=>{let{text:t}=e,[r,n]=(0,a.useState)([]);return(0,a.useEffect)(()=>{n(t.split(" "))},[t]),(0,s.jsx)("div",{children:r.map((e,t)=>(0,s.jsxs)("span",{className:l().fadeIn,style:{animationDelay:"".concat(.01*t,"s")},children:[e," "]},t))})};var o=r(5697),c=r.n(o),d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},u=Object.defineProperty,h=Object.defineProperties,m=Object.getOwnPropertyDescriptors,f=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,v=(e,t,r)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g=(e,t)=>{for(var r in t||(t={}))p.call(t,r)&&v(e,r,t[r]);if(f)for(var r of f(t))x.call(t,r)&&v(e,r,t[r]);return e},y=(e,t)=>h(e,m(t)),j=(e,t)=>{var r={};for(var s in e)p.call(e,s)&&0>t.indexOf(s)&&(r[s]=e[s]);if(null!=e&&f)for(var s of f(e))0>t.indexOf(s)&&x.call(e,s)&&(r[s]=e[s]);return r},b=(e,t,r)=>{let s=(0,a.forwardRef)((t,s)=>{var{color:n="currentColor",size:l=24,stroke:i=2,children:o}=t,c=j(t,["color","size","stroke","children"]);return(0,a.createElement)("svg",g(y(g({ref:s},d),{width:l,height:l,stroke:n,strokeWidth:i,className:`tabler-icon tabler-icon-${e}`}),c),[...r.map(([e,t])=>(0,a.createElement)(e,t)),...o||[]])});return s.propTypes={color:c().string,size:c().oneOfType([c().string,c().number]),stroke:c().oneOfType([c().string,c().number])},s.displayName=`${t}`,s},w=b("brand-twitter","IconBrandTwitter",[["path",{d:"M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c0 -.249 1.51 -2.772 1.818 -4.013z",key:"svg-0"}]]),N=b("brand-github","IconBrandGithub",[["path",{d:"M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5",key:"svg-0"}]]);let k=()=>(0,s.jsxs)("div",{className:"flex h-[50px] border-t border-gray-300 py-2 px-8 items-center sm:justify-between justify-center",children:[(0,s.jsx)("div",{className:"hidden sm:flex"}),(0,s.jsxs)("div",{className:"hidden sm:flex italic text-sm",children:["Created by",(0,s.jsx)("a",{className:"hover:opacity-50 mx-1",href:"https://twitter.com/mckaywrigley",target:"_blank",rel:"noreferrer",children:"Mckay Wrigley"}),"based on the essays of",(0,s.jsx)("a",{className:"hover:opacity-50 ml-1",href:"https://twitter.com/paulg",target:"_blank",rel:"noreferrer",children:"Paul Graham"}),"."]}),(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsx)("a",{className:"flex items-center hover:opacity-50",href:"https://twitter.com/mckaywrigley",target:"_blank",rel:"noreferrer",children:(0,s.jsx)(w,{size:24})}),(0,s.jsx)("a",{className:"flex items-center hover:opacity-50",href:"https://github.com/mckaywrigley/paul-graham-gpt",target:"_blank",rel:"noreferrer",children:(0,s.jsx)(N,{size:24})})]})]});var _=b("external-link","IconExternalLink",[["path",{d:"M11 7h-5a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-5",key:"svg-0"}],["path",{d:"M10 14l10 -10",key:"svg-1"}],["path",{d:"M15 4l5 0l0 5",key:"svg-2"}]]);let P=()=>(0,s.jsxs)("div",{className:"flex h-[60px] border-b border-gray-300 py-2 px-8 items-center justify-between",children:[(0,s.jsx)("div",{className:"font-bold text-2xl flex items-center",children:(0,s.jsx)("a",{className:"hover:opacity-50",href:"https://paul-graham-gpt.vercel.app",children:"Paul Graham GPT"})}),(0,s.jsx)("div",{children:(0,s.jsxs)("a",{className:"flex items-center hover:opacity-50",href:"http://www.paulgraham.com/articles.html",target:"_blank",rel:"noreferrer",children:[(0,s.jsx)("div",{className:"hidden sm:flex",children:"PaulGraham.com"}),(0,s.jsx)(_,{className:"ml-1",size:20})]})})]});var O=b("search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]),S=b("arrow-right","IconArrowRight",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M13 18l6 -6",key:"svg-1"}],["path",{d:"M13 6l6 6",key:"svg-2"}]]),I=r(2781),T=r.n(I),E=r(9008),C=r.n(E);let M=e=>{let{input:t}=e,[r,n]=(0,a.useState)([]),[l,i]=(0,a.useState)(null);return(0,a.useEffect)(()=>{let e=async()=>{try{let e=await fetch("http://127.0.0.1:8000/api/prompt_c?input=".concat(encodeURIComponent(t)));if(!e.ok)throw Error("Failed to fetch from Django endpoint");let r=e.body.getReader(),s=new TextDecoder("utf-8");for(;;){let{value:e,done:t}=await r.read();if(t)break;let a=s.decode(e);n(e=>[...e,a])}}catch(e){e instanceof Error?i(e.message):i("An unknown error occurred.")}};e()},[t]),(0,s.jsxs)("div",{children:[l&&(0,s.jsxs)("div",{children:["Error: ",l]}),r.map((e,t)=>(0,s.jsx)("div",{children:e},t))]})};function A(){var e,t;let r=(e=['\n    Use the following passages to provide an answer to the query: "','"\n\n    ',"\n    "],t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return A=function(){return r},r}function G(){let e=(0,a.useRef)(null),[t,r]=(0,a.useState)(""),[n,l]=(0,a.useState)([]),[o,c]=(0,a.useState)(""),[d,u]=(0,a.useState)(!1),[h,m]=(0,a.useState)(!1),[f,p]=(0,a.useState)("chat"),[x,v]=(0,a.useState)(5),[g,y]=(0,a.useState)(""),j=async()=>{var r;if(!g){alert("Please enter an API key.");return}if(!t){alert("Please enter a query.");return}c(""),l([]),u(!0);let s=await fetch("/api/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:t,apiKey:g,matches:x})});if(!s.ok)throw u(!1),Error(s.statusText);let a=await s.json();return l(a),u(!1),null===(r=e.current)||void 0===r||r.focus(),a},b=async()=>{var r;if(!g){alert("Please enter an API key.");return}if(!t){alert("Please enter a query.");return}c(""),l([]),u(!0);let s=await fetch("/api/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:t,apiKey:g,matches:x})});if(!s.ok)throw u(!1),Error(s.statusText);let a=await s.json();l(a);let n=T()(A(),t,null==a?void 0:a.map(e=>e.content).join("\n\n")),i=await fetch("/api/answer",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:n,apiKey:g})});if(!i.ok)throw u(!1),Error(i.statusText);let o=i.body;if(!o)return;u(!1);let d=o.getReader(),h=new TextDecoder,m=!1;for(;!m;){let{value:e,done:t}=await d.read();m=t;let r=h.decode(e);c(e=>e+r)}null===(r=e.current)||void 0===r||r.focus()},w=e=>{"Enter"===e.key&&("search"===f?j():b())},N=()=>{var t;if(51!==g.length){alert("Please enter a valid API key.");return}localStorage.setItem("PG_KEY",g),localStorage.setItem("PG_MATCH_COUNT",x.toString()),localStorage.setItem("PG_MODE",f),m(!1),null===(t=e.current)||void 0===t||t.focus()},I=()=>{localStorage.removeItem("PG_KEY"),localStorage.removeItem("PG_MATCH_COUNT"),localStorage.removeItem("PG_MODE"),y(""),v(5),p("search")};return(0,a.useEffect)(()=>{x>10?v(10):x<1&&v(1)},[x]),(0,a.useEffect)(()=>{var t;let r=localStorage.getItem("PG_KEY"),s=localStorage.getItem("PG_MATCH_COUNT"),a=localStorage.getItem("PG_MODE");r&&y(r),s&&v(parseInt(s)),a&&p(a),null===(t=e.current)||void 0===t||t.focus()},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(C(),{children:[(0,s.jsx)("title",{children:"Paul Graham GPT"}),(0,s.jsx)("meta",{name:"description",content:"AI-powered search and chat for Paul Graham's essays."}),(0,s.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,s.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,s.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,s.jsx)(P,{}),(0,s.jsx)("div",{className:"flex-1 overflow-auto",children:(0,s.jsxs)("div",{className:"mx-auto flex h-full w-full max-w-[750px] flex-col items-center px-3 pt-4 sm:pt-8",children:[(0,s.jsxs)("button",{className:"mt-4 flex cursor-pointer items-center space-x-2 rounded-full border border-zinc-600 px-3 py-1 text-sm hover:opacity-50",onClick:()=>m(!h),children:[h?"Hide":"Show"," Settings"]}),h&&(0,s.jsxs)("div",{className:"w-[340px] sm:w-[400px]",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{children:"Mode"}),(0,s.jsxs)("select",{className:"max-w-[400px] block w-full cursor-pointer rounded-md border border-gray-300 p-2 text-black shadow-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 sm:text-sm",value:f,onChange:e=>p(e.target.value),children:[(0,s.jsx)("option",{value:"search",children:"Search"}),(0,s.jsx)("option",{value:"chat",children:"Chat"})]})]}),(0,s.jsxs)("div",{className:"mt-2",children:[(0,s.jsx)("div",{children:"Passage Count"}),(0,s.jsx)("input",{type:"number",min:1,max:10,value:x,onChange:e=>v(Number(e.target.value)),className:"max-w-[400px] block w-full rounded-md border border-gray-300 p-2 text-black shadow-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 sm:text-sm"})]}),(0,s.jsxs)("div",{className:"mt-2",children:[(0,s.jsx)("div",{children:"OpenAI API Key"}),(0,s.jsx)("input",{type:"password",placeholder:"OpenAI API Key",className:"max-w-[400px] block w-full rounded-md border border-gray-300 p-2 text-black shadow-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 sm:text-sm",value:g,onChange:e=>{y(e.target.value),51!==e.target.value.length&&m(!0)}})]}),(0,s.jsxs)("div",{className:"mt-4 flex space-x-2 justify-center",children:[(0,s.jsx)("div",{className:"flex cursor-pointer items-center space-x-2 rounded-full bg-green-500 px-3 py-1 text-sm text-white hover:bg-green-600",onClick:N,children:"Save"}),(0,s.jsx)("div",{className:"flex cursor-pointer items-center space-x-2 rounded-full bg-red-500 px-3 py-1 text-sm text-white hover:bg-red-600",onClick:I,children:"Clear"})]})]}),51===g.length?(0,s.jsxs)("div",{className:"relative w-full mt-4",children:[(0,s.jsx)(O,{className:"absolute top-3 w-10 left-1 h-6 rounded-full opacity-50 sm:left-3 sm:top-4 sm:h-8"}),(0,s.jsx)("input",{ref:e,className:"h-12 w-full rounded-full border border-zinc-600 pr-12 pl-11 focus:border-zinc-800 focus:outline-none focus:ring-1 focus:ring-zinc-800 sm:h-16 sm:py-2 sm:pr-16 sm:pl-16 sm:text-lg",type:"text",placeholder:"How do I start a startup?",value:t,onChange:e=>r(e.target.value),onKeyDown:w}),(0,s.jsx)("button",{children:(0,s.jsx)(S,{onClick:"search"===f?j:b,className:"absolute right-2 top-2.5 h-7 w-7 rounded-full bg-blue-500 p-1 hover:cursor-pointer hover:bg-blue-600 sm:right-3 sm:top-3 sm:h-10 sm:w-10 text-white"})})]}):(0,s.jsxs)("div",{className:"text-center font-bold text-3xl mt-7",children:["Please enter your",(0,s.jsx)("a",{className:"mx-2 underline hover:opacity-50",href:"https://platform.openai.com/account/api-keys",children:"OpenAI API key"}),"in settings."]}),d?(0,s.jsxs)("div",{className:"mt-6 w-full",children:["chat"===f&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"font-bold text-2xl",children:"Answer"}),(0,s.jsxs)("div",{className:"animate-pulse mt-2",children:[(0,s.jsx)("div",{className:"h-4 bg-gray-300 rounded"}),(0,s.jsx)("div",{className:"h-4 bg-gray-300 rounded mt-2"}),(0,s.jsx)("div",{className:"h-4 bg-gray-300 rounded mt-2"}),(0,s.jsx)("div",{className:"h-4 bg-gray-300 rounded mt-2"}),(0,s.jsx)("div",{className:"h-4 bg-gray-300 rounded mt-2"})]})]}),(0,s.jsx)("div",{className:"font-bold text-2xl mt-6",children:"Passages"}),(0,s.jsxs)("div",{className:"animate-pulse mt-2",children:[(0,s.jsx)("div",{className:"h-4 bg-gray-300 rounded"}),(0,s.jsx)("div",{className:"h-4 bg-gray-300 rounded mt-2"}),(0,s.jsx)("div",{className:"h-4 bg-gray-300 rounded mt-2"}),(0,s.jsx)("div",{className:"h-4 bg-gray-300 rounded mt-2"}),(0,s.jsx)("div",{className:"h-4 bg-gray-300 rounded mt-2"})]})]}):o?(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsx)("div",{className:"font-bold text-2xl mb-2",children:"Answer"}),(0,s.jsx)(i,{text:o}),(0,s.jsxs)("div",{className:"mt-6 mb-16",children:[(0,s.jsx)("div",{className:"font-bold text-2xl",children:"Passages"}),n.map((e,t)=>(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:"mt-4 border border-zinc-600 rounded-lg p-4",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-bold text-xl",children:e.essay_title}),(0,s.jsx)("div",{className:"mt-1 font-bold text-sm",children:e.essay_date})]}),(0,s.jsx)("a",{className:"hover:opacity-50 ml-2",href:e.essay_url,target:"_blank",rel:"noreferrer",children:(0,s.jsx)(_,{})})]}),(0,s.jsx)("div",{className:"mt-2",children:e.content})]})},t))]})]}):n.length>0?(0,s.jsxs)("div",{className:"mt-6 pb-16",children:[(0,s.jsx)("div",{className:"font-bold text-2xl",children:"Passages"}),n.map((e,t)=>(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:"mt-4 border border-zinc-600 rounded-lg p-4",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-bold text-xl",children:e.essay_title}),(0,s.jsx)("div",{className:"mt-1 font-bold text-sm",children:e.essay_date})]}),(0,s.jsx)("a",{className:"hover:opacity-50 ml-2",href:e.essay_url,target:"_blank",rel:"noreferrer",children:(0,s.jsx)(_,{})})]}),(0,s.jsx)("div",{className:"mt-2",children:e.content})]})},t))]}):(0,s.jsx)("div",{className:"mt-6 text-center text-lg",children:"AI-powered search & chat for Paul Graham's essays."}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{children:"Streaming from Django"}),(0,s.jsx)(M,{input:"Hi Lilly"}),"s"]})]})}),(0,s.jsx)(k,{})]})]})}},2575:function(e){e.exports={fadeIn:"answer_fadeIn__qcpHP"}},9008:function(e,t,r){e.exports=r(3121)},9843:function(e){e.exports=e=>null!=e&&"object"==typeof e&&e.constructor!==RegExp},2703:function(e,t,r){"use strict";var s=r(414);function a(){}function n(){}n.resetWarningCache=a,e.exports=function(){function e(e,t,r,a,n,l){if(l!==s){var i=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:n,resetWarningCache:a};return r.PropTypes=r,r}},5697:function(e,t,r){e.exports=r(2703)()},414:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}},function(e){e.O(0,[774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);